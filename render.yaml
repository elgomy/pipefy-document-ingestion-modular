services:
  - type: web
    name: pipefy-document-ingestion-modular
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn app:app --host 0.0.0.0 --port $PORT
    envVars:
      # üóÑÔ∏è CONFIGURACI√ìN SUPABASE (OBLIGATORIAS)
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_KEY
        sync: false
      - key: SUPABASE_STORAGE_BUCKET_NAME
        value: documents
      
      # üîó CONFIGURACI√ìN PIPEFY (OBLIGATORIAS)
      - key: PIPEFY_TOKEN
        sync: false
      - key: PIPEFY_WEBHOOK_SECRET
        sync: false
      
      # ü§ñ COMUNICACI√ìN CON CREWAI
      - key: CREWAI_SERVICE_URL
        value: https://pipefy-crewai-analysis-modular.onrender.com
      
      # üÜï NUEVAS INTEGRACIONES SEG√öN PRD
      
      # üì± TWILIO - Para notificaciones WhatsApp (OPCIONALES)
      - key: TWILIO_ACCOUNT_SID
        sync: false
      - key: TWILIO_AUTH_TOKEN
        sync: false
      - key: TWILIO_WHATSAPP_NUMBER
        value: +17245586619
      
      # üè≠ CNPJ√° API - Para generaci√≥n autom√°tica de Cart√£o CNPJ (OPCIONAL)
      - key: CNPJA_API_KEY
        sync: false 